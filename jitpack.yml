before_install:
   - echo "gitdir: `pwd`/.git/modules/gutenberg" > gutenberg/.git
   - echo "gitdir: `pwd`/.git/modules/react-native-aztec" > react-native-aztec/.git
   - pwd
   - cat gutenberg/.git
   - git status
   - git submodule
   - ls -la
   - rm -rf .git/modules
   - git submodule update --init --recursive
   - yes | $ANDROID_HOME/tools/bin/sdkmanager "platforms;android-27"
   - yes | $ANDROID_HOME/tools/bin/sdkmanager "build-tools;27.0.3"
install:
   - git status
   - git submodule
   - ls -la
   - echo "Changing into the android folder of the Bridge module"
   - pushd react-native-gutenberg-bridge/android
   - ./gradlew --stacktrace clean -Pgroup=com.github.wordpress-mobile.gutenberg-mobile -Pversion=$VERSION install || rm -Rf react-native-aztec
   - rm -Rf react-native-aztec
   - popd

